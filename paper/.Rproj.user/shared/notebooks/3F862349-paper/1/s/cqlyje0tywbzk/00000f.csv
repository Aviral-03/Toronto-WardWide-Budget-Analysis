"0","#| include: false"
"0","#| warning: false"
"0","#| message: false"
"0","raw_capital_data_2 <- read_csv(""../data/raw_data/raw_capital_data.csv"")"
"1","[38;5;232mNew names:
[36mâ€¢[38;5;232m `` -> `...1`[39m
"
"1","[1mRows: [22m[34m4893[39m [1mColumns: [22m[34m18[39m
"
"1","[36mâ”€â”€[39m [1mColumn specification[22m [36mâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[39m
[1mDelimiter:[22m "",""
[31mchr[39m  (6): Program/Agency Name, Project Name, Sub-Project Name, Ward Number, Ward, Category
[32mdbl[39m (12): ...1, 2023, 2024, 2025, 2026, 2027, 2028, 2029, 2030, 2031, 2032, Total 10 Year
"
"1","
[36mâ„¹[39m Use `spec()` to retrieve the full column specification for this data.
[36mâ„¹[39m Specify the column types or set `show_col_types = FALSE` to quiet this message.
"
"0","# Only keep the relevant columns with name Total 10 Year, Ward Number, Ward, Category"
"0","cleaned_capital_data <- raw_capital_data_2[c(15, 16, 17, 18)] |>"
"0","  rename(""ward_id"" = ""Ward Number"") |>"
"0","  rename(""ward"" = ""Ward"") |>"
"0","  rename(""category"" = ""Category"") |>"
"0","  rename(""total_10_year"" = ""Total 10 Year"")"
"0",""
"0","# Filter out the rows in ward_id that are CW"
"0","cleaned_capital_data <- cleaned_capital_data %>%"
"0","  filter(ward_id != ""CW"")"
"0",""
"0","# Combine the rows with the same ward_id and category and sum the total_10_year keep the ward_name"
"0","cleaned_capital_data <- cleaned_capital_data |>"
"0","  group_by(ward_id, ward, category) |>"
"0","  summarise(total_10_year = sum(total_10_year)) |>"
"0","  # change ward_id to numeric"
"0","  mutate(ward_id = as.numeric(ward_id)) |>"
"0","  arrange(ward_id)"
"1","[38;5;232m`summarise()` has grouped output by 'ward_id', 'ward'. You can override using the `.groups` argument.[39m
"
"0","write.csv(cleaned_capital_data, ""../data/analysis_data/cleaned_capital_data.csv"")"
"0","write_parquet(cleaned_capital_data, ""../data/analysis_data/cleaned_capital_data.parquet"")"
"0","  "
