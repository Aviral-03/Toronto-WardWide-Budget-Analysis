"0","#| include: false"
"0","#| warning: false"
"0","#| message: false"
"0","raw_data_2 <- read_csv(""../data/raw_data/raw_ward_data.csv"")"
"1","[38;5;232mNew names:
[36mâ€¢[38;5;232m `` -> `...1`
[36mâ€¢[38;5;232m `...2` -> `...3`
[36mâ€¢[38;5;232m `...3` -> `...4`
[36mâ€¢[38;5;232m `...4` -> `...5`
[36mâ€¢[38;5;232m `...5` -> `...6`
[36mâ€¢[38;5;232m `...6` -> `...7`
[36mâ€¢[38;5;232m `...7` -> `...8`
[36mâ€¢[38;5;232m `...8` -> `...9`
[36mâ€¢[38;5;232m `...9` -> `...10`
[36mâ€¢[38;5;232m `...10` -> `...11`
[36mâ€¢[38;5;232m `...11` -> `...12`
[36mâ€¢[38;5;232m `...12` -> `...13`
[36mâ€¢[38;5;232m `...13` -> `...14`
[36mâ€¢[38;5;232m `...14` -> `...15`
[36mâ€¢[38;5;232m `...15` -> `...16`
[36mâ€¢[38;5;232m `...16` -> `...17`
[36mâ€¢[38;5;232m `...17` -> `...18`
[36mâ€¢[38;5;232m `...18` -> `...19`
[36mâ€¢[38;5;232m `...19` -> `...20`
[36mâ€¢[38;5;232m `...20` -> `...21`
[36mâ€¢[38;5;232m `...21` -> `...22`
[36mâ€¢[38;5;232m `...22` -> `...23`
[36mâ€¢[38;5;232m `...23` -> `...24`
[36mâ€¢[38;5;232m `...24` -> `...25`
[36mâ€¢[38;5;232m `...25` -> `...26`
[36mâ€¢[38;5;232m `...26` -> `...27`
[36mâ€¢[38;5;232m `...27` -> `...28`[39m
"
"1","[1mRows: [22m[34m1481[39m [1mColumns: [22m[34m28[39m
"
"1","[36mâ”€â”€[39m [1mColumn specification[22m [36mâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[39m
[1mDelimiter:[22m "",""
[31mchr[39m (27): City of Toronto Profiles, ...3, ...4, ...5, ...6, ...7, ...8, ...9, ...10, ...11, ...12, ...13, ...14, .....
[32mdbl[39m  (1): ...1
"
"1","
[36mâ„¹[39m Use `spec()` to retrieve the full column specification for this data.
[36mâ„¹[39m Specify the column types or set `show_col_types = FALSE` to quiet this message.
"
"0","# Only keep the relevant columns:"
"0","cleaned_ward_data <-"
"0","  raw_data_2[c(18, 997, 1307, 1383), ] "
"0","cleaned_ward_data <- as.data.frame(t(cleaned_ward_data)) |>"
"0","  slice(-1) |>"
"0","  slice(-1) |>"
"0","  rename(population = V1, income = V4)"
"0",""
"0","# Remove the first row:"
"0","cleaned_ward_data <- cleaned_ward_data[-1, ]"
"0","# Add ward_id column:"
"0","cleaned_ward_data$ward_id = 1:25"
"0",""
"0","# Set row name as ward_id"
"0","rownames(cleaned_ward_data) <- cleaned_ward_data$ward_id"
"0",""
"0","ward_names <- c(""Etobicoke North"", ""Etobicoke Centre"", ""Etobicoke-Lakeshore"", "
"0","                ""Parkdale-High Park"",""York South-Weston"", ""York Centre"", "
"0","                ""Humber River-Black Creek"", ""Eglinton-Lawrence"","
"0","                ""Davenport"", ""Spadina-Fort York"", ""University-Rosedale"","
"0","                ""Toronto-St. Paul's"", ""Toronto Centre"", ""Toronto-Danforth"","
"0","                ""Don Valley West"", ""Don Valley East"", ""Don Valley North"","
"0","                ""Willowdale"", ""Beaches-East York"", ""Scarborough Southwest"","
"0","                ""Scarborough Centre"", ""Scarborough-Agincourt"","
"0","                ""Scarborough North"", ""Scarborough-Guildwood"","
"0","                ""Scarborough-Rouge Park"")"
"0",""
"0","# Add ward name column:"
"0","cleaned_ward_data$ward = ward_names"
"0",""
"0","# Calculate the percentage of uneducated people in each ward:"
"0","cleaned_ward_data <- cleaned_ward_data[c(""ward_id"", ""ward"", ""population"", ""income"")] |>"
"0","  rename(""average_household_income"" = ""income"")"
"0",""
"0",""
"0","write.csv(cleaned_ward_data, ""../data/analysis_data/cleaned_ward_data.csv"")"
"0","write_parquet(cleaned_ward_data, ""../data/analysis_data/cleaned_ward_data.parquet"")"
"0",""
